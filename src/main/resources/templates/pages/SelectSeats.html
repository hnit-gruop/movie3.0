<!DOCTYPE html>
<!-- saved from url=(0071)https://maoyan.com/xseats/201907070421828?movieId=1218141&cinemaId=1325 -->
<html xmlns:th="http://www.thymeleaf.org"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>选座 - 猫眼电影 - 一网打尽好电影</title>
  
  <link rel="dns-prefetch" href="https://p0.meituan.net/">
  <link rel="dns-prefetch" href="https://p1.meituan.net/">
  <link rel="dns-prefetch" href="https://ms0.meituan.net/">
  <link rel="dns-prefetch" href="https://s0.meituan.net/">
  <link rel="dns-prefetch" href="https://ms1.meituan.net/">
  <link rel="dns-prefetch" href="https://analytics.meituan.com/">
  <link rel="dns-prefetch" href="https://report.meituan.com/">
  <link rel="dns-prefetch" href="https://frep.meituan.com/">

  
  
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta http-equiv="cleartype" content="yes">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="renderer" content="webkit">

  <meta name="HandheldFriendly" content="true">
  <meta name="format-detection" content="email=no">
  <meta name="format-detection" content="telephone=no">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script type="text/javascript" src="js/jquery.min.js"></script>
  
  <link rel="stylesheet" href="css/common.d0f96cc2.css">
<link rel="stylesheet" href="css/cinemas-seat.b8adee6e.css">
  <script crossorigin="anonymous" src="./选座 - 猫眼电影 - 一网打尽好电影_files/stat.88d57c80.js.下载"></script><script async="" defer="" charset="utf-8" src="./选座 - 猫眼电影 - 一网打尽好电影_files/web.js.下载"></script>
  <script>if(window.devicePixelRatio >= 2) { document.write('<link rel="stylesheet" href="//s3plus.meituan.net/v1/mss_e2821d7f0cfe4ac1bf9202ecf9590e67/cdn-prod/file:5788b470/image-2x.8ba7074d.css"/>') }</script>
  <style>
    @font-face {
      font-family: stonefont;
      src: url('//vfile.meituan.net/colorstone/73ad82c3b4f40425c1f2c74ba4e73b123168.eot');
      src: url('//vfile.meituan.net/colorstone/73ad82c3b4f40425c1f2c74ba4e73b123168.eot?#iefix') format('embedded-opentype'),
           url('//vfile.meituan.net/colorstone/f06ec700a0c12008711bfaefc2ddda272080.woff') format('woff');
    }
    

    .stonefont {
      font-family: stonefont;
    }
    
  </style>
  
<style type="text/css">@media only screen and (min-width:320px){.fontSize{font-size:16px}}@media only screen and (min-width:480px){.fontSize{font-size:24px}}@media only screen and (min-width:560px){.fontSize{font-size:30px}}.mtfe-tip-mtfe-wrapper{display:none;position:absolute;width:70%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:9em;padding:.5em 1em;border-radius:.25em;background:rgba(0,0,0,.7);color:#fff;z-index:3;text-align:center}@media only screen and (min-width:320px){.mtfe-tip-mtfe-wrapper{font-size:16px}}@media only screen and (min-width:480px){.mtfe-tip-mtfe-wrapper{font-size:24px}}@media only screen and (min-width:560px){.mtfe-tip-mtfe-wrapper{font-size:30px}}.mtfe-model-mtfe-wrapper{display:none;position:absolute;width:80%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:9em;padding:.5em 0;border-radius:.25em;background:#fff;color:#fff;z-index:3;text-align:center}@media only screen and (min-width:320px){.mtfe-model-mtfe-wrapper{font-size:16px}}@media only screen and (min-width:480px){.mtfe-model-mtfe-wrapper{font-size:24px}}@media only screen and (min-width:560px){.mtfe-model-mtfe-wrapper{font-size:30px}}.mtfe-smscodeyoda-mtfe-wrapper{display:none;width:80%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:40%;position:absolute;z-index:2}.mtfe-mask-mtfe-wrapper{margin:0;padding:0;position:absolute;top:0;left:0;display:none;background:rgba(0,0,0,.6);width:100%;height:100%;z-index:1}.iLoginComp-wrapper{width:100%;padding:1.2em;-webkit-box-sizing:border-box;box-sizing:border-box}@media only screen and (min-width:320px){.iLoginComp-wrapper{font-size:16px}}@media only screen and (min-width:480px){.iLoginComp-wrapper{font-size:24px}}@media only screen and (min-width:560px){.iLoginComp-wrapper{font-size:30px}}.iLoginComp-phone-num-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;border-bottom:1px solid #e5e5e5;padding-bottom:.6em}.iLoginComp-phone-num-input{-webkit-box-flex:1;-ms-flex:1;flex:1;border:0;min-width:0;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em}.iLoginComp-phone-num-input,.iLoginComp-phone-num-input:focus{outline:none;background-color:inherit}.iLoginComp-phone-num-input::-webkit-input-placeholder{color:#ccc}.iLoginComp-phone-num-input:-ms-input-placeholder,.iLoginComp-phone-num-input::-ms-input-placeholder{color:#ccc}.iLoginComp-phone-num-input::placeholder{color:#ccc}.iLoginComp-verify-code-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;margin-top:1em;padding-bottom:.6em;border-bottom:1px solid #e5e5e5;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.iLoginComp-code-input{-webkit-box-flex:1;-ms-flex:1;flex:1;width:100%;border:0;min-width:0;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em}.iLoginComp-code-input,.iLoginComp-code-input:focus{outline:none;background-color:inherit}.iLoginComp-code-input::-webkit-input-placeholder{color:#ccc}.iLoginComp-code-input:-ms-input-placeholder,.iLoginComp-code-input::-ms-input-placeholder{color:#ccc}.iLoginComp-code-input::placeholder{color:#ccc}.iLogincomp-opbtn-wrapper{margin-top:2em}.iLoginComp-cancel-btn-wrapper,.iLoginComp-login-btn-wrapper{text-align:center;color:#999;background:#e5e5e5;height:2.8em;line-height:2.8em;border-radius:.3em;width:100%;display:block;border:none;cursor:pointer;font-size:1em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iLoginComp-cancel-btn-wrapper:focus,.iLoginComp-login-btn-wrapper:focus{outline:0}.iLoginComp-login-btn-wrapper.iLogincomp-active{color:#fff;background:#06c1ae}.iLoginComp-send-verify-code-text{font-size:.8em;color:#999;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#dcdcdc;border:1px solid #dcdcdc;padding:.2em .5em;border-radius:.2em;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iLoginComp-send-verify-code-text.iLogincomp-active{color:#06c1ae;border:1px solid #06c1ae;background:0}.iLogincomp-count-down{color:#999;background-color:#dcdcdc;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:2em}</style><meta name="lx:autopv" content="off"><meta name="lx:appnm" content="movie"><meta name="lx:category" content="movie"></head>
<body>




    <div class="container" id="app">
  <div class="order-progress-bar">
  <div class="step first done">
    <span class="step-num">1</span>
    <div class="bar"></div>
    <span class="step-text">选择影片场次</span>
  </div>
  <div class="step done">
    <span class="step-num">2</span>
    <div class="bar"></div>    
    <span class="step-text">选择座位</span>    
  </div>
  <div class="step ">
    <span class="step-num">3</span>
    <div class="bar"></div>    
    <span class="step-text">15分钟内付款</span>    
  </div>
  <div class="step last ">
    <span class="step-num">4</span>
    <div class="bar"></div>    
    <span class="step-text">影院取票观影</span>    
  </div>
</div>


    <div class="main clearfix">
      <div class="hall">
        <div class="seat-example">
          <div class="selectable-example example">
            <span>可选座位</span>
          </div>
          <div class="sold-example example">
            <span>已售座位</span>
          </div>
          <div class="selected-example example">
            <span>已选座位</span>
          </div>
          <div class="couple-example example">
            <span>情侣座位</span>
          </div>
        </div>

        
<div class="seats-block" >
  <div class="row-id-container" id="sign">
        <span class="row-id">1</span>    
        <span class="row-id">2</span>    
        <span class="row-id">3</span>    
        <span class="row-id">4</span>    
        <span class="row-id">5</span>    
        <span class="row-id">6</span>    
        <span class="row-id">7</span>    
        <span class="row-id">8</span>    
  </div>

  <div class="seats-container">
    <div class="screen-container" style="left: 5px;">
      <div class="screen">银幕中央</div>
      <div class="c-screen-line"></div>
    </div>
           
   			<form id ="ff" action="pay" method="post">
            	<input hidden="hidden" name="userId" id="userId" value="">
            	<input hidden="hidden" name="scheduleId" id="scheduleId" value="">
            	<input hidden="hidden" name="movieId" id="movieId" value="">
            	<input hidden="hidden" name="sumPrice" id="sumPrice" value="">
            </form>
    
    <!-- 影厅分大 中 小三种 -->
    

    <div class="seats-wrapper">
        
       	
        <seat id="seat">
        <!-- 循环生成座位 -->
<!--        	 <div class="row" th:each="i:${#numbers.sequence(1,10)}"> -->
<!--             <span class="seat seat selectable" th:each="j:${#numbers.sequence(1,14)}" onclick="sl(this)"  th:text="${i+','+j}"></span> -->
<!--         </div> -->
        <seat>
        
        
        <script>
  		function generateSeat(row,colunm,sum){
  		  var cnt = 0,flag = 0;	
  	      $("#seat").html('');
          for(var i = 1;i<=row;i++){
          	if(flag==1)
          		break;
          	$("#seat").append('<div class="row" id=r'+i+'>');
          	for(var j = 1;j<=colunm;j++){
          		if(cnt>sum){
          			flag = 1;
          			break;
          		}
         		 	$("#r"+i).append('<span class="seat seat selectable" id="'+i+','+j+'" onclick="sl(this)">'+i+','+j+'</span>');
          		cnt++;
         		}
          }
  		}
  		var sum = [[${hall.capacity}]];//总座位数
  		if(sum>117){
  			$("#sign").append('<span class="row-id">9</span>');
  			$("#sign").append('<span class="row-id">10</span>');
  			generateSeat(10,14,sum);
  		}else if(sum>64){
  			$("#sign").append('<span class="row-id">9</span>');
  			generateSeat(9,13,sum);
  		}else{
  			generateSeat(8,8,sum);
  		}
  		
        
        
        	var slist = new Array();
        	
        	function sl(e){
        		var no = $(e).html();
        		var cls = $(e).attr("class");
        		//如果没选
        		if(cls=="seat seat selectable"){
        			$(e).attr("class","seat seat selected");
        			slist.push(no);
        		//如果是自已选的
        		}else if(cls=="seat seat selected"){
        			$(e).attr("class","seat seat selectable");
        			//删除数组中已选的票
        			for(var i = 0;i<slist.length;i++){
        				if(slist[i]==no){
        					slist.splice(i,1);
        				}
        			}
        		}
        		
        		//更新选座
        		updateSeat();
        	}
        	
        	//每点击一次鼠标更新一次右边已选座位
        	function updateSeat(){
        		$("#slist").html('');
        		for(var i = 0;i < slist.length;i++){
      			    var arr = slist[i].split(',');
        			$("#slist").append('<span class="ticket">'+arr[0]+'排'+arr[1]+'座'+'</span>');
        		}
        		
        		//计算总价格
        		var sum = slist.length*[[${schedule.price}]];
        		
        		$("#sum").html(sum);
        	}
        	
        	function send(){
        		var userId = [[${session.user.userId}]];
        		var scheduleId = [[${schedule.scheduleId}]];
        		var movieId = [[${schedule.movieId}]];
				
				if(slist.length>0){
					
					$("#userId").val(userId);
					$("#scheduleId").val(scheduleId);
					$("#movieId").val(movieId);
					$("#sumPrice").val($("#sum").html());
					
					for(var i = 0;i<slist.length;i++){
						$("#ff").append('<input  type="text" hidden="hidden" name="slist"  value="'+slist[i]+'">');
					}
					
					$("#ff").submit();
// 					alert($("#ff").children().eq(3).val());
// 					window.location.href="pay?userId="+userId+"&scheduleId="+scheduleId+"&slist="+slist;			
					
					
// 					$.getJSON("pay",{
// 						userId:userId,
// 						scheduleId:scheduleId,
// 						slist,slist
// 					},function(data){
// 						if(data=="1"){
// 							window.location.href="confirm?userId="+userId+"&scheduleId="+scheduleId+"&slist"+slist;
// 						}
// 					});
				}else{
					alert("请先选择座位！");
				}
        	}
        	
        	
        	//渲染售出的座位
        	$(function(){
        		var sold =  "[[${sold}]]" ;
        		sold = sold.replace('[','');
        		sold = sold.replace(']','');
        		var list = sold.split(', ');
        		for(var i = 0;i<list.length;i++){
        			var rc = list[i].split(',');
        			if(rc.length>1){
        				var row = $("#seat").children().eq(rc[0]-1);
        				var colunm = $(row).children().eq(rc[1]-1);
        				$(colunm).attr("class","seat seat sold");
        			}
        		}
        	});
           </script>
    </div>
  </div>

</div>
</div>


      <div class="side">
        <div class="movie-info clearfix">
          <div class="poster">
            <img th:src="@{/movieImg/cover/{img} (img=${movie.coverImage})}">
          </div>
          <div class="content">
            <p class="name text-ellipsis" th:text="${movie.name}">扫毒2天地对决</p>
            <div class="info-item">
              <span>类型 :</span>
              <span class="value" id="typelist"><span th:each="t:${movie.listType}" th:text="${t.name+' '}"></span></span>
            </div>
            <div class="info-item">
              <span>时长 :</span>
              <span class="value" th:text="${movie.duration+'分钟'}">100分钟</span>
            </div>
          </div>
        </div>

        <div class="show-info">
          <div class="info-item">
            <span>影院 :</span>
            <span class="value text-ellipsis" th:text="${cinemaName}" >时代金球电影城</span>
          </div>
          <div class="info-item">
            <span>影厅 :</span>
            <span class="value text-ellipsis" th:text="${hall.name}">6号厅</span>
          </div>
          <div class="info-item">
            <span>版本 :</span>
            <span class="value text-ellipsis" th:text="${movie.language}">国语2D</span>
          </div>
          <div class="info-item">
            <span>场次 :</span>
            <span class="value text-ellipsis screen" th:text="${schedule.showStartTime}"> </span>
          </div>
          <div class="info-item">
            <span>票价 :</span>
            <span class="value text-ellipsis" th:text="${schedule.price}">￥35.9/张</span>
          </div>
        </div>

        <div class="ticket-info">
          <div class="no-ticket" style="display: none;">
            <p class="buy-limit">座位：一次最多选6个座位</p>
            <p class="no-selected">请<span>点击左侧</span>座位图选择座位</p>
          </div>
          <div class="has-ticket" style="display: block;">
            <span class="text">座位：</span>
            <div class="ticket-container" data-limit="6">
            
            <div id="slist">
            </div>
            
            	
            </div>
          </div>

          <div class="total-price">
            <span>总价 :</span>
            <span class="price" id="sum">0</span>
          </div>
        </div>

        <div class="confirm-order">
            <div class="cellphone">
              <span>手机号 :</span>
              <span class="phone-num">135****4008</span>
            </div>
            <div class="confirm-btn" onclick="send()">确认选座</div>

        </div>
      </div>
    </div>
      <div class="modal-container" style="display:none">
    <div class="modal">
      <span class="icon"></span>

      <p class="tip"></p>

        <div class="ok-btn btn">我知道了</div>
    </div>
  </div>

  <script src="./选座 - 猫眼电影 - 一网打尽好电影_files/index.min.js.下载"></script>
    </div>

<div class="footer" style="visibility: visible;">
    <p class="friendly-links">
        关于猫眼 :
        <a href="http://ir.maoyan.com/s/index.php#pageScroll0" target="_blank">关于我们</a>
        <span></span>
        <a href="http://ir.maoyan.com/s/index.php#pageScroll1" target="_blank">管理团队</a>
        <span></span>
        <a href="http://ir.maoyan.com/s/index.php#pageScroll2" target="_blank">投资者关系</a>
        &nbsp;&nbsp;&nbsp;&nbsp;
        友情链接 :
        <a href="http://www.meituan.com/" data-query="utm_source=wwwmaoyan" target="_blank">美团网</a>
        <span></span>
        <a href="http://www.gewara.com/" data-query="utm_source=wwwmaoyan">格瓦拉</a>
        <span></span>
        <a href="http://i.meituan.com/client" data-query="utm_source=wwwmaoyan" target="_blank">美团下载</a>
        <span></span>
        <a href="https://www.huanxi.com/" data-query="utm_source=maoyan_pc" target="_blank">欢喜首映</a>
    </p>
    <p class="friendly-links">
      商务合作邮箱：v@maoyan.com
      客服电话：10105335
      违法和不良信息举报电话：4006018900
      <br>
      投诉举报邮箱：tousujubao@meituan.com
      舞弊线索举报邮箱：wubijubao@maoyan.com
    </p>
    <p>
        ©2016
        猫眼电影 maoyan.com
        <a href="https://tsm.miit.gov.cn/pages/EnterpriseSearchList_Portal.aspx?type=0&amp;keyword=%E4%BA%ACICP%E8%AF%81160733%E5%8F%B7&amp;pageNo=1" target="_blank">京ICP证160733号</a>
        <a href="http://www.miibeian.gov.cn/" target="_blank">京ICP备16022489号-1</a>
        <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010102003232" target="_blank">京公网安备 11010102003232号</a>
        <a href="https://maoyan.com/about/licence" target="_blank">网络文化经营许可证</a>
        <a href="http://www.meituan.com/about/rules" target="_blank">电子公告服务规则</a>
    </p>
    <p>北京猫眼文化传媒有限公司</p>
</div>



</body></html>